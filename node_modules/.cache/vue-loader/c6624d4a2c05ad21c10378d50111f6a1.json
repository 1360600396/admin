{"remainingRequest":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\src\\views\\Car\\CarRule\\index.vue?vue&type=style&index=0&id=1953090e&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\src\\views\\Car\\CarRule\\index.vue","mtime":1704167261885},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":1714140750111},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1714140755034},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1714140753336},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1714140750590},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714140753088},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1714140753454}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJ1bGUtY29udGFpbmVyIHsKICBwYWRkaW5nOiAyMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7Cn0KCi5zZWFyY2gtY29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYigyMzcsIDIzNywgMjM3LCAuOSk7CiAgcGFkZGluZy1ib3R0b206IDIwcHg7CgogIC5zZWFyY2gtbGFiZWwgewogICAgd2lkdGg6IDEwMHB4OwogIH0KCiAgLnNlYXJjaC1tYWluIHsKICAgIHdpZHRoOiAyMjBweDsKICAgIG1hcmdpbi1yaWdodDogMTBweDsKICB9Cn0KLmNyZWF0ZS1jb250YWluZXJ7CiAgbWFyZ2luOiAxMHB4IDBweDsKfQoucGFnZS1jb250YWluZXJ7CiAgcGFkZGluZzo0cHggMHB4OwogIHRleHQtYWxpZ246IHJpZ2h0Owp9Ci5mb3JtLWNvbnRhaW5lcnsKICBwYWRkaW5nOjBweCA4MHB4Owp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Car/CarRule","sourcesContent":["<template>\n  <div class=\"rule-container\">\n    <div class=\"create-container\">\n      <el-button type=\"primary\">增加停车计费规则</el-button>\n      <el-button @click=\"exportExcel\">导出Excel</el-button>\n    </div>\n    <!-- 表格区域 -->\n    <div class=\"table\">\n      <el-table :data=\"ruleList\" style=\"width: 100%\">\n        <el-table-column type=\"index\" label=\"序号\" />\n        <el-table-column label=\"计费规则编号\" prop=\"ruleNumber\" />\n        <el-table-column label=\"计费规则名称\" prop=\"ruleName\" />\n        <el-table-column label=\"免费时长(分钟)\" prop=\"freeDuration\" />\n        <el-table-column label=\"收费上线(元)\" prop=\"chargeCeiling\" />\n        <el-table-column label=\"计费方式\" prop=\"chargeType\">\n          <template #default=\"scope\">\n            {{ formChargeType(scope.row.chargeType) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"计费规则\" prop=\"ruleNameView\" />\n        <el-table-column label=\"操作\" fixed=\"right\" width=\"120\">\n          <template #default=\"scope\">\n            <el-button size=\"mini\" type=\"text\">编辑</el-button>\n            <el-button size=\"mini\" type=\"text\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 分页 -->\n      <el-pagination\n        layout=\"prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"params.pageSize\"\n        @current-change=\"pageChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getRuleListAPI } from '@/api/rule'\nimport { utils, writeFileXLSX } from 'xlsx'\nexport default {\n  name: 'Building',\n  data() {\n    return {\n      ruleList: [], // 规则列表\n      // 请求参数\n      params: {\n        page: 1,\n        pageSize: 8\n      },\n      // 规则总数\n      total: 0,\n      dialogVisible: false\n    }\n  },\n  mounted() {\n    this.getList()\n  },\n  methods: {\n    async exportExcel() {\n      // 创建一个新的工作簿\n      const workbook = utils.book_new()\n      // 创建一个工作表 要求一个对象数组格式\n      // 1. 获取当前要导出的table数据\n      const res = await getRuleListAPI(this.params)\n      // 2. 按照需求调整数据的顺序\n      const tableHeaderKeys = ['ruleNumber', 'ruleName', 'freeDuration', 'chargeCeiling', 'chargeType', 'ruleNameView']\n      const tableHeaderValues = ['计费规则编号', '计费规则名称', '免费时长(分钟)', '收费上线(元)', '计费方式', '计费规则']\n      // 以excel表格的顺序调整后端数据\n      const sheetData = res.data.rows.map((item) => {\n        const newObj = {} // 存放正确顺序的key-value\n        tableHeaderKeys.forEach(key => {\n          if (key === 'chargeType') {\n            newObj[key] = this.formChargeType(item[key])\n          } else {\n            newObj[key] = item[key]\n          }\n        })\n        return newObj\n      })\n      const worksheet = utils.json_to_sheet(sheetData)\n      // 把工作表添加到工作簿  Data为工作表名称\n      utils.book_append_sheet(workbook, worksheet, 'Data')\n      // 改写表头\n      utils.sheet_add_aoa(worksheet, [tableHeaderValues], { origin: 'A1' })\n      // 导出方法进行导出\n      writeFileXLSX(workbook, 'SheetJSVueAoO.xlsx')\n    },\n    async getList() {\n      const res = await getRuleListAPI(this.params)\n      this.ruleList = res.data.rows\n      this.total = res.data.total\n    },\n    pageChange(page) {\n      this.params.page = page\n      this.getList()\n    },\n    formChargeType(chargeType) {\n      const MAP = {\n        duration: '时长收费',\n        turn: '按次收费',\n        partition: '分段收费'\n      }\n      return MAP[chargeType]\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.rule-container {\n  padding: 20px;\n  background-color: #fff;\n}\n\n.search-container {\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid rgb(237, 237, 237, .9);\n  padding-bottom: 20px;\n\n  .search-label {\n    width: 100px;\n  }\n\n  .search-main {\n    width: 220px;\n    margin-right: 10px;\n  }\n}\n.create-container{\n  margin: 10px 0px;\n}\n.page-container{\n  padding:4px 0px;\n  text-align: right;\n}\n.form-container{\n  padding:0px 80px;\n}\n</style>\n"]}]}