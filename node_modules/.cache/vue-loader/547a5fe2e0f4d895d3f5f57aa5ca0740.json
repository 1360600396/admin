{"remainingRequest":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\src\\views\\Login\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\src\\views\\Login\\index.vue","mtime":1704167080709},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714140753088},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1714140751623},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714140753088},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1714140753454}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IFJFTUVNQkVSX0tFWSA9ICdyZW1lbWJlcl9rZXknCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDooajljZXlr7nosaEKICAgICAgZm9ybTogewogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgcmVtZW1iZXI6IGZhbHNlLAogICAgICAvLyDop4TliJnlr7nosaEKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpei0puWPtycsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgcGFzc3dvcmQ6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyDljrvmnKzlnLDlj5bkuIDkuIvkuYvliY3lrZjlhaXnmoTotKblj7flkozlr4bnoIEg5aaC5p6c5Y+W5Yiw5LqGIOi1i+WAvOaTjeS9nAogICAgY29uc3QgZm9ybVN0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFJFTUVNQkVSX0tFWSkKICAgIGlmIChmb3JtU3RyKSB7CiAgICAgIGNvbnN0IGZvcm1PYmogPSBKU09OLnBhcnNlKGZvcm1TdHIpCiAgICAgIHRoaXMuZm9ybSA9IGZvcm1PYmoKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luSGFuZGxlcigpIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICAvLyDmiYDmnInnmoTooajljZXpobnpg73pgJrov4fmoKHpqowgdmFsaWTlj5jph4/miY3kuLp0cnVlIOWQpuWImeWwseaYr2ZhbHNlCiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAvLyDmt7vliqDorrDkvY/miJHpgLvovpEKICAgICAgICAgIGlmICh0aGlzLnJlbWVtYmVyKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFJFTUVNQkVSX0tFWSwgSlNPTi5zdHJpbmdpZnkodGhpcy5mb3JtKSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFJFTUVNQkVSX0tFWSkKICAgICAgICAgIH0KICAgICAgICAgIC8vIFRPRE8gTE9HSU4KICAgICAgICAgIC8vIOi/memHjOehruS/nXRva2Vu6L+U5Zue5LmL5ZCO5YaN6Lez6L2s5Yiw6aaW6aG1IOmYsuatoummlumhteacieS4gOS6m+mcgOimgeS+nei1lnRva2Vu55qE6YC76L6RCiAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci9hc3luY0xvZ2luJywgdGhpcy5mb3JtKQogICAgICAgICAgLy8g6Lez6L2s5Yiw6aaW6aG1CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpCiAgICAgICAgICAvLyDmj5DnpLrnlKjmiLfnmbvlvZXmiJDlip8KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfnmbvlvZXmiJDlip8nCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0KCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\n  <div class=\"login_body\">\n    <div class=\"bg\" />\n    <div class=\"box\">\n      <div class=\"title\">智慧园区-登录</div>\n      <!--\n        基础校验\n          el-form  :model=\"表单对象\" :rules=\"规则对象\"\n          el-form-item  prop属性指定一下要使用哪条规则\n          el-input  v-model双向绑定\n\n        统一校验\n          1. 获取表单的实例对象\n          2. 调用validate方法\n       -->\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\">\n        <el-form-item\n          label=\"账号\"\n          prop=\"username\"\n        >\n          <el-input v-model=\"form.username\" />\n        </el-form-item>\n\n        <el-form-item\n          label=\"密码\"\n          prop=\"password\"\n        >\n          <el-input v-model=\"form.password\" />\n        </el-form-item>\n        <!--\n          1. 完成选择框的双向绑定 得到一个true或者false的选中状态\n          2. 如果当前为true，点击登录时，表示要记住，把当前的用户名和密码存入本地\n          3. 组件初始化的时候，从本地取账号和密码，把账号密码存入用来双向绑定的form身上\n          4. 如果当前用户没有记住，状态为false，点击登录的时候要把之前的数据清空\n         -->\n        <el-form-item prop=\"remember\">\n          <el-checkbox v-model=\"remember\">记住我</el-checkbox>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" class=\"login_btn\" @click=\"loginHandler\">登录</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nconst REMEMBER_KEY = 'remember_key'\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      // 表单对象\n      form: {\n        username: '',\n        password: ''\n      },\n      remember: false,\n      // 规则对象\n      rules: {\n        username: [\n          {\n            required: true,\n            message: '请输入账号',\n            trigger: 'blur'\n          }\n        ],\n        password: [\n          {\n            required: true,\n            message: '请输入密码',\n            trigger: 'blur'\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    // 去本地取一下之前存入的账号和密码 如果取到了 赋值操作\n    const formStr = localStorage.getItem(REMEMBER_KEY)\n    if (formStr) {\n      const formObj = JSON.parse(formStr)\n      this.form = formObj\n    }\n  },\n  methods: {\n    loginHandler() {\n      this.$refs.form.validate(async valid => {\n        // 所有的表单项都通过校验 valid变量才为true 否则就是false\n        if (valid) {\n          // 添加记住我逻辑\n          if (this.remember) {\n            localStorage.setItem(REMEMBER_KEY, JSON.stringify(this.form))\n          } else {\n            localStorage.removeItem(REMEMBER_KEY)\n          }\n          // TODO LOGIN\n          // 这里确保token返回之后再跳转到首页 防止首页有一些需要依赖token的逻辑\n          await this.$store.dispatch('user/asyncLogin', this.form)\n          // 跳转到首页\n          this.$router.push('/')\n          // 提示用户登录成功\n          this.$message({\n            type: 'success',\n            message: '登录成功'\n          })\n        }\n      })\n    }\n  }\n}\n\n</script>\n\n<style scoped lang=\"scss\">\n  .login_body {\n    display: flex;\n  }\n  .bg {\n    width: 60vw;\n    height: 100vh;\n    background: url('~@/assets/login-bg.svg') no-repeat;\n    background-position: right top;\n    background-size: cover;\n  }\n  .box {\n    margin: 200px 10% 0;\n    flex: 1;\n    .title {\n      padding-bottom: 76px;\n      font-size: 26px;\n      font-weight: 500;\n      color: #1e2023;\n    }\n    ::v-deep() {\n      .ant-form-item {\n        display: flex;\n        margin-bottom: 62px;\n        flex-direction: column;\n      }\n      .ant-form-item-label label {\n        font-size: 16px;\n        color: #8b929d;\n      }\n      .ant-input,\n      .ant-input-password {\n        border-radius: 8px;\n      }\n    }\n  }\n  .login_btn{\n    width: 100%;\n  }\n</style>\n"]}]}