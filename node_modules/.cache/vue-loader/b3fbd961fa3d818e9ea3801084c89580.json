{"remainingRequest":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\src\\views\\Car\\CarRule\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\src\\views\\Car\\CarRule\\index.vue","mtime":1704167261885},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714140753088},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1714140751623},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714140753088},{"path":"C:\\Users\\zxb\\Desktop\\黑马前端\\课件源码资料\\阶段五 Vue2+Vue3项目实战开发\\黑马智数项目-配套资料\\黑马智数项目-配套资料\\项目代码\\hmzs\\hmzs-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1714140753454}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFJ1bGVMaXN0QVBJIH0gZnJvbSAnQC9hcGkvcnVsZScKaW1wb3J0IHsgdXRpbHMsIHdyaXRlRmlsZVhMU1ggfSBmcm9tICd4bHN4JwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0J1aWxkaW5nJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVsZUxpc3Q6IFtdLCAvLyDop4TliJnliJfooagKICAgICAgLy8g6K+35rGC5Y+C5pWwCiAgICAgIHBhcmFtczogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgcGFnZVNpemU6IDgKICAgICAgfSwKICAgICAgLy8g6KeE5YiZ5oC75pWwCiAgICAgIHRvdGFsOiAwLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBleHBvcnRFeGNlbCgpIHsKICAgICAgLy8g5Yib5bu65LiA5Liq5paw55qE5bel5L2c57C/CiAgICAgIGNvbnN0IHdvcmtib29rID0gdXRpbHMuYm9va19uZXcoKQogICAgICAvLyDliJvlu7rkuIDkuKrlt6XkvZzooagg6KaB5rGC5LiA5Liq5a+56LGh5pWw57uE5qC85byPCiAgICAgIC8vIDEuIOiOt+WPluW9k+WJjeimgeWvvOWHuueahHRhYmxl5pWw5o2uCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldFJ1bGVMaXN0QVBJKHRoaXMucGFyYW1zKQogICAgICAvLyAyLiDmjInnhafpnIDmsYLosIPmlbTmlbDmja7nmoTpobrluo8KICAgICAgY29uc3QgdGFibGVIZWFkZXJLZXlzID0gWydydWxlTnVtYmVyJywgJ3J1bGVOYW1lJywgJ2ZyZWVEdXJhdGlvbicsICdjaGFyZ2VDZWlsaW5nJywgJ2NoYXJnZVR5cGUnLCAncnVsZU5hbWVWaWV3J10KICAgICAgY29uc3QgdGFibGVIZWFkZXJWYWx1ZXMgPSBbJ+iuoei0ueinhOWImee8luWPtycsICforqHotLnop4TliJnlkI3np7AnLCAn5YWN6LS55pe26ZW/KOWIhumSnyknLCAn5pS26LS55LiK57q/KOWFgyknLCAn6K6h6LS55pa55byPJywgJ+iuoei0ueinhOWImSddCiAgICAgIC8vIOS7pWV4Y2Vs6KGo5qC855qE6aG65bqP6LCD5pW05ZCO56uv5pWw5o2uCiAgICAgIGNvbnN0IHNoZWV0RGF0YSA9IHJlcy5kYXRhLnJvd3MubWFwKChpdGVtKSA9PiB7CiAgICAgICAgY29uc3QgbmV3T2JqID0ge30gLy8g5a2Y5pS+5q2j56Gu6aG65bqP55qEa2V5LXZhbHVlCiAgICAgICAgdGFibGVIZWFkZXJLZXlzLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgIGlmIChrZXkgPT09ICdjaGFyZ2VUeXBlJykgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IHRoaXMuZm9ybUNoYXJnZVR5cGUoaXRlbVtrZXldKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBpdGVtW2tleV0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHJldHVybiBuZXdPYmoKICAgICAgfSkKICAgICAgY29uc3Qgd29ya3NoZWV0ID0gdXRpbHMuanNvbl90b19zaGVldChzaGVldERhdGEpCiAgICAgIC8vIOaKiuW3peS9nOihqOa3u+WKoOWIsOW3peS9nOewvyAgRGF0YeS4uuW3peS9nOihqOWQjeensAogICAgICB1dGlscy5ib29rX2FwcGVuZF9zaGVldCh3b3JrYm9vaywgd29ya3NoZWV0LCAnRGF0YScpCiAgICAgIC8vIOaUueWGmeihqOWktAogICAgICB1dGlscy5zaGVldF9hZGRfYW9hKHdvcmtzaGVldCwgW3RhYmxlSGVhZGVyVmFsdWVzXSwgeyBvcmlnaW46ICdBMScgfSkKICAgICAgLy8g5a+85Ye65pa55rOV6L+b6KGM5a+85Ye6CiAgICAgIHdyaXRlRmlsZVhMU1god29ya2Jvb2ssICdTaGVldEpTVnVlQW9PLnhsc3gnKQogICAgfSwKICAgIGFzeW5jIGdldExpc3QoKSB7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldFJ1bGVMaXN0QVBJKHRoaXMucGFyYW1zKQogICAgICB0aGlzLnJ1bGVMaXN0ID0gcmVzLmRhdGEucm93cwogICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWwKICAgIH0sCiAgICBwYWdlQ2hhbmdlKHBhZ2UpIHsKICAgICAgdGhpcy5wYXJhbXMucGFnZSA9IHBhZ2UKICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCiAgICBmb3JtQ2hhcmdlVHlwZShjaGFyZ2VUeXBlKSB7CiAgICAgIGNvbnN0IE1BUCA9IHsKICAgICAgICBkdXJhdGlvbjogJ+aXtumVv+aUtui0uScsCiAgICAgICAgdHVybjogJ+aMieasoeaUtui0uScsCiAgICAgICAgcGFydGl0aW9uOiAn5YiG5q615pS26LS5JwogICAgICB9CiAgICAgIHJldHVybiBNQVBbY2hhcmdlVHlwZV0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Car/CarRule","sourcesContent":["<template>\n  <div class=\"rule-container\">\n    <div class=\"create-container\">\n      <el-button type=\"primary\">增加停车计费规则</el-button>\n      <el-button @click=\"exportExcel\">导出Excel</el-button>\n    </div>\n    <!-- 表格区域 -->\n    <div class=\"table\">\n      <el-table :data=\"ruleList\" style=\"width: 100%\">\n        <el-table-column type=\"index\" label=\"序号\" />\n        <el-table-column label=\"计费规则编号\" prop=\"ruleNumber\" />\n        <el-table-column label=\"计费规则名称\" prop=\"ruleName\" />\n        <el-table-column label=\"免费时长(分钟)\" prop=\"freeDuration\" />\n        <el-table-column label=\"收费上线(元)\" prop=\"chargeCeiling\" />\n        <el-table-column label=\"计费方式\" prop=\"chargeType\">\n          <template #default=\"scope\">\n            {{ formChargeType(scope.row.chargeType) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"计费规则\" prop=\"ruleNameView\" />\n        <el-table-column label=\"操作\" fixed=\"right\" width=\"120\">\n          <template #default=\"scope\">\n            <el-button size=\"mini\" type=\"text\">编辑</el-button>\n            <el-button size=\"mini\" type=\"text\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 分页 -->\n      <el-pagination\n        layout=\"prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"params.pageSize\"\n        @current-change=\"pageChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getRuleListAPI } from '@/api/rule'\nimport { utils, writeFileXLSX } from 'xlsx'\nexport default {\n  name: 'Building',\n  data() {\n    return {\n      ruleList: [], // 规则列表\n      // 请求参数\n      params: {\n        page: 1,\n        pageSize: 8\n      },\n      // 规则总数\n      total: 0,\n      dialogVisible: false\n    }\n  },\n  mounted() {\n    this.getList()\n  },\n  methods: {\n    async exportExcel() {\n      // 创建一个新的工作簿\n      const workbook = utils.book_new()\n      // 创建一个工作表 要求一个对象数组格式\n      // 1. 获取当前要导出的table数据\n      const res = await getRuleListAPI(this.params)\n      // 2. 按照需求调整数据的顺序\n      const tableHeaderKeys = ['ruleNumber', 'ruleName', 'freeDuration', 'chargeCeiling', 'chargeType', 'ruleNameView']\n      const tableHeaderValues = ['计费规则编号', '计费规则名称', '免费时长(分钟)', '收费上线(元)', '计费方式', '计费规则']\n      // 以excel表格的顺序调整后端数据\n      const sheetData = res.data.rows.map((item) => {\n        const newObj = {} // 存放正确顺序的key-value\n        tableHeaderKeys.forEach(key => {\n          if (key === 'chargeType') {\n            newObj[key] = this.formChargeType(item[key])\n          } else {\n            newObj[key] = item[key]\n          }\n        })\n        return newObj\n      })\n      const worksheet = utils.json_to_sheet(sheetData)\n      // 把工作表添加到工作簿  Data为工作表名称\n      utils.book_append_sheet(workbook, worksheet, 'Data')\n      // 改写表头\n      utils.sheet_add_aoa(worksheet, [tableHeaderValues], { origin: 'A1' })\n      // 导出方法进行导出\n      writeFileXLSX(workbook, 'SheetJSVueAoO.xlsx')\n    },\n    async getList() {\n      const res = await getRuleListAPI(this.params)\n      this.ruleList = res.data.rows\n      this.total = res.data.total\n    },\n    pageChange(page) {\n      this.params.page = page\n      this.getList()\n    },\n    formChargeType(chargeType) {\n      const MAP = {\n        duration: '时长收费',\n        turn: '按次收费',\n        partition: '分段收费'\n      }\n      return MAP[chargeType]\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.rule-container {\n  padding: 20px;\n  background-color: #fff;\n}\n\n.search-container {\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid rgb(237, 237, 237, .9);\n  padding-bottom: 20px;\n\n  .search-label {\n    width: 100px;\n  }\n\n  .search-main {\n    width: 220px;\n    margin-right: 10px;\n  }\n}\n.create-container{\n  margin: 10px 0px;\n}\n.page-container{\n  padding:4px 0px;\n  text-align: right;\n}\n.form-container{\n  padding:0px 80px;\n}\n</style>\n"]}]}